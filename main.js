!function(){"use strict";class e{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_hideInputError(e){const t=document.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_showInputError(e){const t=document.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass);const s=e.validationMessage;t.textContent=s,t.classList.add(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_turnButtonActive(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_turnButtonInActive(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_hasInvalidOutput(){return!this._inputEls.every((e=>e.validity.valid))}toggleButtonState(){this._hasInvalidOutput()?this._turnButtonInActive():this._turnButtonActive()}_setEventListeners(){this._inputEls=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this.toggleButtonState(),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState(this._inputEls,this._submitButton)}))}))}enableValidation(){console.log("this function is being called"),this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class t{constructor(e,t){let{renderer:s,items:o}=e;this._renderer=s,this._items=o,this._element=document.querySelector(`.${t}`)}renderItems(){console.log("render Items is being called"),this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._element.prepend(e)}}const s=document.querySelector("#add-card-modal"),o=document.querySelector("#edit-modal"),r=(s.querySelector(".modal__input-description_type_url"),s.querySelector(".modal__input-title_type_title"),document.querySelector(".profile__header"),document.querySelector(".profile__subheader"),o.querySelector(".modal__input-title")),i=o.querySelector(".modal__input-description"),n=document.querySelector(".profile__add-button"),l=document.querySelector(".profile__edit-button"),a=document.querySelector("#add-card-form"),d=document.querySelector("#edit-modal"),c=document.querySelector("#edit-profile-avatar-modal"),h={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},u=document.querySelector(".profile__picture");class m{constructor(e,t,s,o,r,i){let{isLiked:n,name:l,link:a,_id:d}=e;this.name=l,this.link=a,this.isLiked=n,this.id=d,this.cardSelector=t,this._handleImageClick=s,this._addLikeButton=r,this._removeLikeButton=i,this.openDeleteForm=o}_setEventListeners(){this.likeButton.addEventListener("click",(()=>{0==this.isLiked?(console.log("the person has liked this post"),this._addLikeButton(this)):(console.log("the person has doesn't like this post"),this._removeLikeButton(this))})),this._cardElement.querySelector(".card__delete-button").addEventListener("click",(()=>{console.log("button is being pressed"),this.openDeleteForm(this)})),this.cardImageElement.addEventListener("click",(()=>{this._handleImageClick(this)}))}_likeStatus(){this.isLiked?this._removeLikeButton(this):this._addLikeButton(this)}addLikeButtonElement(){this.likeButton.classList.add("card__like-button_active")}removeLikeButtonElement(){this.likeButton.classList.remove("card__like-button_active")}_toggleLikeButton(){this.likeButton.classList.toggle("card__like-button_active")}deleteCard(){this._cardElement.remove(),this._cardElement=null}getView(){const e=document.querySelector(this.cardSelector).content.firstElementChild;return this._cardElement=e.cloneNode(!0),this.cardImageElement=this._cardElement.querySelector(".card__image"),this.cardTitleElement=this._cardElement.querySelector(".card__title"),this.likeButton=this._cardElement.querySelector(".card__like-button"),this._setEventListeners(),this.cardImageElement.setAttribute("src",this.link),this.cardImageElement.setAttribute("alt",this.name),this.cardTitleElement.textContent=this.name,1==this.isLiked?this.addLikeButtonElement():this.removeLikeButtonElement(),this._cardElement}}class p{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(`${t}`),this._modalCloseButton=this._popupElement.querySelector(".modal__close-button")}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{console.log("f has been called"),"Escape"===e.key&&this.close()};setEventListeners(){this._modalCloseButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("mousedown",(e=>{e.target.classList.contains("modal")&&this.close()}))}}class _ extends p{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this.popupForm=this._popupElement.querySelector(".modal__form"),this._handFormSubmit=s,console.log(this._popupForm),this._submitButton=this._popupElement.querySelector(".modal__save-button"),this._modalSaveButtonDefaultText=this._submitButton.textContent}_getInputValues(){const e=this.popupForm.querySelectorAll(".modal__input");console.log(e);const t={};return e.forEach((e=>{t[e.name]=e.value})),t}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";console.log(this._modalSaveButtonDefaultText+" is the value of the default text"),this._submitButton.textContent=e?t:this._modalSaveButtonDefaultText}setEventListeners(){this.popupForm.addEventListener("submit",(e=>{e.preventDefault(),this.inputValues=this._getInputValues(),this.renderLoading(!0),this._handFormSubmit(this.inputValues)})),super.setEventListeners()}}const g=e=>{b.open(e)},E=e=>{const t=new m(e,"#card-template",g,(function(){q.open(),q.setSubmitAction((()=>{q.renderLoading(!0,"Deleting..."),U.deleteCard(t.id).then((e=>{console.log("The delete card function is being called"),t.deleteCard()})).then((()=>{q.close()})).finally((()=>{q.renderLoading(!1)})).catch((e=>{console.log(`There is an error in the program: ${e}`)}))}))}),(function(){U.addLike(t.id).then((e=>{t.isLiked=e.isLiked,t.addLikeButtonElement()})).catch((e=>{console.log(`There is an error in the program: ${e}`)}))}),(function(){U.removeLike(t.id).then((e=>{t.isLiked=e.isLiked,t.removeLikeButtonElement()})).catch((e=>{console.log(`There is an error in the program: ${e}`)}))}));return t.getView()},v={popupSelector:"#add-card-modal",handleFormSubmit:e=>{y.renderLoading(!0,"Saving..."),U.addCard(e.name,e.link).then((e=>{const t=E(e);I.addItem(t)})).then((()=>{y.close(),y.popupForm.reset(),k.toggleButtonState()})).finally((()=>{y.renderLoading(!1)})).catch((e=>{console.log(`There is an error in the program: ${e}`)}))}},f={popupSelector:"#edit-modal",handleFormSubmit:e=>{C.renderLoading(!0,"Saving..."),U.editProfile(e.profileName,e.profileJob).then((t=>{L.setUserInfo(e.profileName,e.profileJob),console.log(t)})).then((e=>{C.popupForm.reset(),B.toggleButtonState(),C.close()})).finally((()=>{C.renderLoading(!1)})).catch((e=>{console.log(`There is an error in the program: ${e}`)}))}},S={popupSelector:"#edit-profile-avatar-modal",handleFormSubmit:e=>{T.renderLoading(!0,"Saving..."),U.updateProfilePicture(e.avatar).then((t=>{L.setUserAvatar(e.avatar),console.log(t)})).then((()=>{T.close(),T.popupForm.reset(),x.toggleButtonState()})).finally((()=>{T.renderLoading(!1)})).catch((e=>{console.log(`There is an error in the program: ${e}`)}))}},b=new class extends p{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this.popupImageElement=document.querySelector(".image-modal__image-element"),this.popupImageTextElement=document.querySelector(".image-modal__text")}open(e){let{name:t,link:s}=e;this.popupImageElement.setAttribute("src",s),this.popupImageElement.setAttribute("alt",t),this.popupImageTextElement.textContent=t,super.open()}}({popupSelector:".image-modal"}),L=new class{constructor(e,t,s){this.profileJobEl=document.querySelector(t),this.profileNameEl=document.querySelector(e),this.profileAvatarEl=document.querySelector(s)}getUserInfo(){const e={name:"",job:""};return e.name=this.profileNameEl.textContent,e.job=this.profileJobEl.textContent,e}setUserInfo(e,t){this.profileJobEl.textContent=t,this.profileNameEl.textContent=e}setUserAvatar(e){console.log("setUserAvatar() has been called"),console.log(e),this.profileAvatarEl.setAttribute("src",e),this.profileAvatarEl.setAttribute("alt",this.profileNameEl.textContent)}}(".profile__header",".profile__subheader",".profile__picture_image"),k=new e(h,a),y=new _(v),B=new e(h,d),C=new _(f);let I;const q=new class extends p{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this.popupForm=this._popupElement.querySelector(".modal__form"),console.log(this._popupForm),this._modalDeleteButton=this._popupElement.querySelector(".modal__save-button"),this._modalDeleteButtonDefaultText=this._modalDeleteButton.textContent}setSubmitAction(e){this._handleFormSubmit=e}setEventListeners(){super.setEventListeners(),this.popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Deleting...";console.log("render loading method is being called"),this._modalDeleteButton.textContent=1==e?t:this._modalDeleteButtonDefaultText}}({popupSelector:"#delete-card-modal"}),T=new _(S),x=new e(h,c);T.setEventListeners(),q.setEventListeners(),y.setEventListeners(),C.setEventListeners(),b.setEventListeners(),x.enableValidation(),B.enableValidation(),k.enableValidation(),n.addEventListener("click",(()=>{y.open()})),l.addEventListener("click",(()=>{const{name:e,job:t}=L.getUserInfo();console.log(L.getUserInfo()),r.value=e,i.value=t,C.open()})),u.addEventListener("click",(()=>{console.log("Image profile avatar is being clicked"),T.open()}));const U=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkValidResponse)}loadUserInfo(){return fetch(`${this._baseUrl}/users/me`,{method:"GET",headers:this._headers}).then(this._checkValidResponse)}loadCards(){return fetch(`${this._baseUrl}/cards`,{method:"GET",headers:this._headers}).then(this._checkValidResponse)}editProfile(e,t){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})}).then(this._checkValidResponse)}addCard(e,t){return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})}).then(this._checkValidResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkValidResponse)}addLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this._checkValidResponse)}removeLike(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkValidResponse)}updateProfilePicture(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})}).then(this._checkValidResponse)}_fetchRequest(e,t){return fetch(e,t).then(this._checkValidResponse)}_checkValidResponse(e){return e.ok?e.json():Promise.reject(`Error ${e.status}`)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"883a5f27-9ca4-4397-af55-ef56c8ad3047","Content-Type":"application/json"}});U.loadUserInfo().then((e=>{let{name:t,about:s,avatar:o}=e;L.setUserInfo(t,s),L.setUserAvatar(o)})).catch((e=>{console.log(`There is an error in the program: ${e}`)})),U.getInitialCards().then((e=>{I=new t({renderer:e=>{const t=E(e);I.addItem(t)},items:e},"cards__list"),I.renderItems()})).catch((e=>{console.log(`There is an error in the program: ${e}`)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxLQUFLQyxVQUFVLENBQ25CakMsT0FBUW1DLE1BRVQzRCxLQUFLekksS0FBSzRMLG9CQUNmLENBRUFTLGFBQUFBLENBQWNyQixFQUFLc0IsR0FDakIsT0FBT1osTUFBTVYsRUFBS3NCLEdBQVM3RCxLQUFLekksS0FBSzRMLG9CQUN2QyxDQUVBQSxtQkFBQUEsQ0FBb0JsRCxHQUNsQixPQUFJQSxFQUFJNkQsR0FDQzdELEVBQUk4RCxPQUVOQyxRQUFRQyxPQUFRLFNBQVFoRSxFQUFJaUUsU0FDckMsR0p1S2tCLENBQ2xCdEIsUUFBUyxrREFDVEMsUUFBUyxDQUNQc0IsY0FBZSx1Q0FDZixlQUFnQixzQkFHcEJwRSxFQUNHcUQsZUFDQXBELE1BQUt4RixJQUE2QixJQUE1QixLQUFFNkIsRUFBSSxNQUFFaUgsRUFBSyxPQUFFOUIsR0FBUWhILEVBQzVCMEcsRUFBWUMsWUFBWTlFLEVBQU1pSCxHQUM5QnBDLEVBQVlPLGNBQWNELEVBQU8sSUFFbENyQixPQUFPRixJQUNON0YsUUFBUUMsSUFBSyxxQ0FBb0M0RixJQUFNLElBRTNERixFQUNHaUQsa0JBQ0FoRCxNQUFNb0UsSUFDTDFELEVBQWdCLElBQUluRyxFQUNsQixDQUNFRyxTQUFXTSxJQUNULE1BQU15RixFQUFjZixFQUFXMUUsR0FDL0IwRixFQUFjekYsUUFBUXdGLEVBQVksRUFFcEM5RixNQUFPeUosR0ovUEUsZUltUWIxRCxFQUFjM0YsYUFBYSxJQUU1Qm9GLE9BQU9GLElBQ043RixRQUFRQyxJQUFLLHFDQUFvQzRGLElBQU0sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRGVsZXRlQ29uZmlybWF0aW9uUG9wdXAuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIC8vZ2l2ZSB0aGUgaW5wdXRFbCB0aGUgZXJyb3IgY2xhc3NcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAvL2dpdmUgdGhlIGVycm9yRWwgdGhlIGVycm9yIG1lc3NhZ2VcclxuICAgIGVycm9yRWwudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgZXJyb3JFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIC8vZ2l2ZSB0aGUgaW5wdXRFbCB0aGUgZXJyb3IgY2xhc3NcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XHJcbiAgICAvL2dpdmUgdGhlIGVycm9yRWwgdGhlIGVycm9yIG1lc3NhZ2VcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZSA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWwudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpIHtcclxuICAgIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3R1cm5CdXR0b25BY3RpdmUoKSB7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgX3R1cm5CdXR0b25JbkFjdGl2ZSgpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkT3V0cHV0KCkge1xyXG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkT3V0cHV0KCkpIHtcclxuICAgICAgdGhpcy5fdHVybkJ1dHRvbkluQWN0aXZlKCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl90dXJuQnV0dG9uQWN0aXZlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVscyA9IFtcclxuICAgICAgLi4udGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKTtcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0RWxzLCB0aGlzLl9zdWJtaXRCdXR0b24pO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIGNvbnNvbGUubG9nKFwidGhpcyBmdW5jdGlvbiBpcyBiZWluZyBjYWxsZWRcIik7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgLy8gdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciwgaXRlbXMgfSwgY2xhc3NTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Y2xhc3NTZWxlY3Rvcn1gKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgLy91c2UgdGhpcy5fcmVuZGVyZXIgdG8gcmVuZGVyIGl0ZW1zIHRvIHRoZSB0aGlzLl9lbGVtZW50XHJcbiAgICBjb25zb2xlLmxvZyhcInJlbmRlciBJdGVtcyBpcyBiZWluZyBjYWxsZWRcIik7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGRhdGEpIHtcclxuICAgIC8vdGFrZSB0aGUgaXRlbSBhbmQgYWRkIGl0IHRvIHRoaXMuX2VsZW1lbnRcclxuICAgIHRoaXMuX2VsZW1lbnQucHJlcGVuZChkYXRhKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L3lvc2VtaXRlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGF0ZW1hci5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xyXG4gIENhcmRTZWxlY3Rpb246IFwiY2FyZHNfX2xpc3RcIixcclxuICBDYXJkdGVtcGxhdGU6IFwiI2NhcmQtdGVtcGxhdGVcIixcclxuICBJbWFnZU1vZGFsU2VsZWN0aW9uOiBcImltYWdlLW1vZGFsXCIsXHJcbn07XHJcblxyXG5jb25zdCBhZGRDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLW1vZGFsXCIpO1xyXG5jb25zdCBlZGl0UHJvZmlsZW1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LW1vZGFsXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZENhcmRJbWdVcmxJbnB1dCA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiLm1vZGFsX19pbnB1dC1kZXNjcmlwdGlvbl90eXBlX3VybFwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ2FyZFRpdGxlSW5wdXQgPSBhZGRDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcclxuICBcIi5tb2RhbF9faW5wdXQtdGl0bGVfdHlwZV90aXRsZVwiXHJcbik7XHJcblxyXG4vL2V2ZXJ5IGVsZW1lbnQgbmVlZGVkIGZvciB0aGUgZWRpdCBmb3JtIHRvIHdvcmtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19oZWFkZXJcIik7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUpvYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fc3ViaGVhZGVyXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGVkaXRQcm9maWxlbW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXQtdGl0bGVcIik7XHJcblxyXG5leHBvcnQgY29uc3Qgam9iSW5wdXQgPSBlZGl0UHJvZmlsZW1vZGFsLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIubW9kYWxfX2lucHV0LWRlc2NyaXB0aW9uXCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiXHJcbik7XHJcblxyXG5leHBvcnQgY29uc3QgSW1hZ2VQb3B1cFNlbGVjdG9yID0ge1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiLmltYWdlLW1vZGFsXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ2FyZFNlbGVjdG9yID0ge1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2FkZC1jYXJkLW1vZGFsXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgYWRkQ2FyZEZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNhZGQtY2FyZC1mb3JtXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlRm9ybUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2VkaXQtbW9kYWxcIik7XHJcblxyXG5leHBvcnQgY29uc3QgZWRpdEF2YXRhckZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIiNlZGl0LXByb2ZpbGUtYXZhdGFyLW1vZGFsXCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxyXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxyXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fc2F2ZS1idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaW1hZ2VQcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19waWN0dXJlXCIpO1xyXG4iLCIvL1wiQ29tcG9uZW50c1wiIGhhcyBiZWVuIHJlbmFtZWQgdG8gXCJjb21wb25lbnRzIGluIGdpdGh1YlwiXHJcbi8vbXkgY29tcHV0ZXIgdGhyb3dzIGFuIGVycm9yIHdoZW4gSSBpbXBvcnQgaW4gXCJpbmRleC5qc1wiXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBpc0xpa2VkLCBuYW1lLCBsaW5rLCBfaWQgfSxcclxuICAgIGNhcmRTZWxlY3RvcixcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBvcGVuRGVsZXRlRm9ybSxcclxuICAgIGFkZExpa2VCdXR0b24sXHJcbiAgICByZW1vdmVMaWtlQnV0dG9uXHJcbiAgKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5saW5rID0gbGluaztcclxuICAgIHRoaXMuaXNMaWtlZCA9IGlzTGlrZWQ7XHJcbiAgICB0aGlzLmlkID0gX2lkO1xyXG4gICAgdGhpcy5jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2FkZExpa2VCdXR0b24gPSBhZGRMaWtlQnV0dG9uO1xyXG4gICAgdGhpcy5fcmVtb3ZlTGlrZUJ1dHRvbiA9IHJlbW92ZUxpa2VCdXR0b247XHJcbiAgICB0aGlzLm9wZW5EZWxldGVGb3JtID0gb3BlbkRlbGV0ZUZvcm07XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBpZiAodGhpcy5pc0xpa2VkID09IHRydWUpIHtcclxuICAgIC8vICAgdGhpcy5hZGRMaWtlQnV0dG9uRWxlbWVudCgpO1xyXG4gICAgLy8gfSBlbHNlIHtcclxuICAgIC8vICAgdGhpcy5yZW1vdmVMaWtlQnV0dG9uRWxlbWVudCgpO1xyXG4gICAgLy8gfVxyXG4gICAgLy8uY2FyZF9fbGlrZS1idXR0b25cclxuICAgIHRoaXMubGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBpZiAodGhpcy5pc0xpa2VkID09IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ0aGUgcGVyc29uIGhhcyBsaWtlZCB0aGlzIHBvc3RcIik7XHJcbiAgICAgICAgdGhpcy5fYWRkTGlrZUJ1dHRvbih0aGlzKTtcclxuICAgICAgICAvLyB0aGlzLmFkZExpa2VCdXR0b25FbGVtZW50KCk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJ0aGUgcGVyc29uIGhhcyBkb2Vzbid0IGxpa2UgdGhpcyBwb3N0XCIpO1xyXG4gICAgICAgIHRoaXMuX3JlbW92ZUxpa2VCdXR0b24odGhpcyk7XHJcbiAgICAgICAgLy8gdGhpcy5yZW1vdmVMaWtlQnV0dG9uRWxlbWVudCgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIC8vLmNhcmRfX2RlbGV0ZS1idXR0b25cclxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIlxyXG4gICAgKTtcclxuICAgIGRlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImJ1dHRvbiBpcyBiZWluZyBwcmVzc2VkXCIpO1xyXG4gICAgICB0aGlzLm9wZW5EZWxldGVGb3JtKHRoaXMpO1xyXG4gICAgICAvLyB0aGlzLl9oYW5kbGVDYXJkRGVsZXRlKHRoaXMuaWQpO1xyXG4gICAgfSk7XHJcbiAgICAvLy5jYXJkX19pbWFnZVxyXG4gICAgdGhpcy5jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcyk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9saWtlU3RhdHVzKCkge1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCkge1xyXG4gICAgICB0aGlzLl9yZW1vdmVMaWtlQnV0dG9uKHRoaXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYWRkTGlrZUJ1dHRvbih0aGlzKTtcclxuICAgIH1cclxuICB9XHJcbiAgYWRkTGlrZUJ1dHRvbkVsZW1lbnQoKSB7XHJcbiAgICB0aGlzLmxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcbiAgcmVtb3ZlTGlrZUJ1dHRvbkVsZW1lbnQoKSB7XHJcbiAgICB0aGlzLmxpa2VCdXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVMaWtlQnV0dG9uKCkge1xyXG4gICAgdGhpcy5saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgLy9nZXQgdGhlIGNhcmQgdmlldyBhbmQgaXQncyBlbGVtZW50c1xyXG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLmNhcmRTZWxlY3RvcikuY29udGVudFxyXG4gICAgICAuZmlyc3RFbGVtZW50Q2hpbGQ7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGNhcmRUZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICB0aGlzLmNhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5jYXJkVGl0bGVFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKTtcclxuICAgIHRoaXMubGlrZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XHJcbiAgICAvL3VzZSBwcml2YXRlIG1ldGhvZCBzZXQgZXZlbnQgbGlzdGVuZXJzXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgLy9zZXQgdGhlIGVsZW1lbnRzIGluIGh0ZSBjYXJkIGVsZW1lbnQgdG8gdGhlIHByb3BlcnRpZXMgb2YgdGhpcyBjbGFzc1xyXG4gICAgdGhpcy5jYXJkSW1hZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcInNyY1wiLCB0aGlzLmxpbmspO1xyXG4gICAgdGhpcy5jYXJkSW1hZ2VFbGVtZW50LnNldEF0dHJpYnV0ZShcImFsdFwiLCB0aGlzLm5hbWUpO1xyXG4gICAgdGhpcy5jYXJkVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCA9PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMuYWRkTGlrZUJ1dHRvbkVsZW1lbnQoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMucmVtb3ZlTGlrZUJ1dHRvbkVsZW1lbnQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgJHtwb3B1cFNlbGVjdG9yfWApO1xyXG4gICAgdGhpcy5fbW9kYWxDbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgY29uc29sZS5sb2coXCJmIGhhcyBiZWVuIGNhbGxlZFwiKTtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIC8vdGhpcy5fbW9kYWxDbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZSh0aGlzKSk7XHJcbiAgICB0aGlzLl9tb2RhbENsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMucG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9wb3B1cEZvcm0pO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX19zYXZlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fbW9kYWxTYXZlQnV0dG9uRGVmYXVsdFRleHQgPSB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHRoaXMucG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgY29uc29sZS5sb2coaW5wdXRWYWx1ZXMpO1xyXG4gICAgY29uc3QgaW5wdXRPYmogPSB7fTtcclxuICAgIGlucHV0VmFsdWVzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0T2JqW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4gaW5wdXRPYmo7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcclxuICAgICAgdGhpcy5fbW9kYWxTYXZlQnV0dG9uRGVmYXVsdFRleHQgKyBcIiBpcyB0aGUgdmFsdWUgb2YgdGhlIGRlZmF1bHQgdGV4dFwiXHJcbiAgICApO1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBsb2FkaW5nVGV4dDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX21vZGFsU2F2ZUJ1dHRvbkRlZmF1bHRUZXh0O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLnBvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuaW5wdXRWYWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICB0aGlzLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgIHRoaXMuX2hhbmRGb3JtU3VibWl0KHRoaXMuaW5wdXRWYWx1ZXMpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCIvL2ltcG9ydCBhbGwgdGhlIGNsYXNzZXNcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIGluaXRpYWxDYXJkcyxcclxuICBzZWxlY3RvcnMsXHJcbiAgaW1hZ2VQcm9maWxlQXZhdGFyLFxyXG4gIG5hbWVJbnB1dCxcclxuICBqb2JJbnB1dCxcclxuICBJbWFnZVBvcHVwU2VsZWN0b3IsXHJcbiAgYWRkQ2FyZEJ1dHRvbixcclxuICBjb25maWcsXHJcbiAgYWRkQ2FyZEZvcm1FbGVtZW50LFxyXG4gIGVkaXRBdmF0YXJGb3JtRWxlbWVudCxcclxuICBlZGl0UHJvZmlsZUZvcm1FbGVtZW50LFxyXG4gIGVkaXRQcm9maWxlQnV0dG9uLFxyXG59IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBEZWxldGVDb25maXJtYXRpb25Qb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9EZWxldGVDb25maXJtYXRpb25Qb3B1cC5qc1wiO1xyXG5cclxuY29uc3QgaGFuZGxlSW1hZ2VDbGljayA9IChkYXRhKSA9PiB7XHJcbiAgaW1hZ2VQb3B1cC5vcGVuKGRhdGEpO1xyXG59O1xyXG5cclxuY29uc3QgY3JlYXRlQ2FyZCA9IChjYXJkRGF0YSkgPT4ge1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgIGNhcmREYXRhLFxyXG4gICAgc2VsZWN0b3JzLkNhcmR0ZW1wbGF0ZSxcclxuICAgIGhhbmRsZUltYWdlQ2xpY2ssXHJcbiAgICBmdW5jdGlvbiBoYW5kbGVEZWxldGVNb2RhbCgpIHtcclxuICAgICAgZGVsZXRlQ2FyZEZvcm0ub3BlbigpO1xyXG5cclxuICAgICAgZGVsZXRlQ2FyZEZvcm0uc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICBkZWxldGVDYXJkRm9ybS5yZW5kZXJMb2FkaW5nKHRydWUsIFwiRGVsZXRpbmcuLi5cIik7XHJcbiAgICAgICAgYXBpXHJcbiAgICAgICAgICAuZGVsZXRlQ2FyZChjYXJkLmlkKVxyXG4gICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRoZSBkZWxldGUgY2FyZCBmdW5jdGlvbiBpcyBiZWluZyBjYWxsZWRcIik7XHJcbiAgICAgICAgICAgIC8vIGRlbGV0ZSB0aGUgY2FyZCBlbGVtZW50XHJcbiAgICAgICAgICAgIGNhcmQuZGVsZXRlQ2FyZCgpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlQ2FyZEZvcm0uY2xvc2UoKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGRlbGV0ZUNhcmRGb3JtLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaCgocmVzKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGBUaGVyZSBpcyBhbiBlcnJvciBpbiB0aGUgcHJvZ3JhbTogJHtyZXN9YCk7XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgZnVuY3Rpb24gYWRkTGlrZUJ1dHRvbigpIHtcclxuICAgICAgYXBpXHJcbiAgICAgICAgLmFkZExpa2UoY2FyZC5pZClcclxuICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICBjYXJkLmlzTGlrZWQgPSByZXMuaXNMaWtlZDtcclxuICAgICAgICAgIGNhcmQuYWRkTGlrZUJ1dHRvbkVsZW1lbnQoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaCgocmVzKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhgVGhlcmUgaXMgYW4gZXJyb3IgaW4gdGhlIHByb2dyYW06ICR7cmVzfWApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGZ1bmN0aW9uIHJlbW92ZUxpa2VCdXR0b24oKSB7XHJcbiAgICAgIGFwaVxyXG4gICAgICAgIC5yZW1vdmVMaWtlKGNhcmQuaWQpXHJcbiAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgY2FyZC5pc0xpa2VkID0gcmVzLmlzTGlrZWQ7XHJcbiAgICAgICAgICBjYXJkLnJlbW92ZUxpa2VCdXR0b25FbGVtZW50KCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goKHJlcykgPT4ge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYFRoZXJlIGlzIGFuIGVycm9yIGluIHRoZSBwcm9ncmFtOiAke3Jlc31gKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICApO1xyXG4gIC8vY2FyZC5pc0xpa2VkID0gZmFsc2U7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xyXG59O1xyXG5cclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vL09iamVjdHNcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcblxyXG4vL0FkZCBDYXJkIG9iamVjdFxyXG5jb25zdCBhZGRDYXJkT2JqZWN0ID0ge1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2FkZC1jYXJkLW1vZGFsXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICBhZGRDYXJkRm9ybS5yZW5kZXJMb2FkaW5nKHRydWUsIFwiU2F2aW5nLi4uXCIpO1xyXG4gICAgYXBpXHJcbiAgICAgIC5hZGRDYXJkKGlucHV0VmFsdWVzLm5hbWUsIGlucHV0VmFsdWVzLmxpbmspXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAvLyBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoaW5wdXRWYWx1ZXMpO1xyXG4gICAgICAgIC8vIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpbnB1dFZhbHVlcyk7XHJcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHJlcyk7XHJcbiAgICAgICAgLy8gYWRkQ2FyZEZvcm0ucG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgLy8gYWRkQ2FyZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgICBjYXJkU2VsZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgYWRkQ2FyZEZvcm0uY2xvc2UoKTtcclxuICAgICAgICBhZGRDYXJkRm9ybS5wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgICAgICBhZGRDYXJkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgYWRkQ2FyZEZvcm0ucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgocmVzKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFRoZXJlIGlzIGFuIGVycm9yIGluIHRoZSBwcm9ncmFtOiAke3Jlc31gKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufTtcclxuLy90aGUgZWRpdCBwcm9maWxlIG9iamVjdFxyXG5jb25zdCBlZGl0UHJvZmlsZU9iamVjdCA9IHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNlZGl0LW1vZGFsXCIsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGlucHV0VmFsdWVzKSA9PiB7XHJcbiAgICBlZGl0UHJvZmlsZUZvcm0ucmVuZGVyTG9hZGluZyh0cnVlLCBcIlNhdmluZy4uLlwiKTtcclxuICAgIGFwaVxyXG4gICAgICAuZWRpdFByb2ZpbGUoaW5wdXRWYWx1ZXMucHJvZmlsZU5hbWUsIGlucHV0VmFsdWVzLnByb2ZpbGVKb2IpXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICB1c2VyUHJvZmlsZS5zZXRVc2VySW5mbyhcclxuICAgICAgICAgIGlucHV0VmFsdWVzLnByb2ZpbGVOYW1lLFxyXG4gICAgICAgICAgaW5wdXRWYWx1ZXMucHJvZmlsZUpvYlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICBlZGl0UHJvZmlsZUZvcm0ucG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgZWRpdFByb2ZpbGVGb3JtLmNsb3NlKCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBlZGl0UHJvZmlsZUZvcm0ucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgocmVzKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFRoZXJlIGlzIGFuIGVycm9yIGluIHRoZSBwcm9ncmFtOiAke3Jlc31gKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufTtcclxuXHJcbmNvbnN0IGRlbGV0ZUNhcmRPYmplY3QgPSB7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIjZGVsZXRlLWNhcmQtbW9kYWxcIixcclxufTtcclxuXHJcbmNvbnN0IGVkaXRBdmF0YXJPYmplY3QgPSB7XHJcbiAgcG9wdXBTZWxlY3RvcjogXCIjZWRpdC1wcm9maWxlLWF2YXRhci1tb2RhbFwiLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChpbnB1dFZhbHVlcykgPT4ge1xyXG4gICAgZWRpdFByb2ZpbGVBdmF0YXJGb3JtLnJlbmRlckxvYWRpbmcodHJ1ZSwgXCJTYXZpbmcuLi5cIik7XHJcbiAgICBhcGlcclxuICAgICAgLnVwZGF0ZVByb2ZpbGVQaWN0dXJlKGlucHV0VmFsdWVzLmF2YXRhcilcclxuICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgIHVzZXJQcm9maWxlLnNldFVzZXJBdmF0YXIoaW5wdXRWYWx1ZXMuYXZhdGFyKTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIGVkaXRQcm9maWxlQXZhdGFyRm9ybS5jbG9zZSgpO1xyXG4gICAgICAgIGVkaXRQcm9maWxlQXZhdGFyRm9ybS5wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgICAgICBlZGl0QXZhdGFyRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgZWRpdFByb2ZpbGVBdmF0YXJGb3JtLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKHJlcykgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGBUaGVyZSBpcyBhbiBlcnJvciBpbiB0aGUgcHJvZ3JhbTogJHtyZXN9YCk7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn07XHJcblxyXG5jb25zdCBlZGl0QXZhdGFyT2JqZWN0SGFuZGxlU3VibWl0ID0ge1xyXG4gIHBvcHVwU2VsZWN0b3I6IFwiI2VkaXQtcHJvZmlsZS1hdmF0YXItbW9kYWxcIixcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoaW5wdXRWYWx1ZXMpID0+IHtcclxuICAgIGhhbmRsZVN1Ym1pdChcclxuICAgICAgZnVuY3Rpb24gaGFuZGxlQXZhdGFyKCkge1xyXG4gICAgICAgIGFwaVxyXG4gICAgICAgICAgLnVwZGF0ZVByb2ZpbGVQaWN0dXJlKGlucHV0VmFsdWVzLmF2YXRhcilcclxuICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgdXNlclByb2ZpbGUuc2V0VXNlckF2YXRhcihpbnB1dFZhbHVlcy5hdmF0YXIpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIGVkaXRQcm9maWxlQXZhdGFyRm9ybS5jbG9zZSgpO1xyXG4gICAgICAgICAgICBlZGl0UHJvZmlsZUF2YXRhckZvcm0ucG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgICAgIGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBlZGl0UHJvZmlsZUF2YXRhckZvcm0ucmVuZGVyTG9hZGluZyhmYWxzZSk7XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgLmNhdGNoKChyZXMpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYFRoZXJlIGlzIGFuIGVycm9yIGluIHRoZSBwcm9ncmFtOiAke3Jlc31gKTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICB9LFxyXG4gICAgICBlZGl0UHJvZmlsZUF2YXRhckZvcm0sXHJcbiAgICAgIFwiU2F2aW5nLi4uXCJcclxuICAgICk7XHJcbiAgfSxcclxufTtcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuLy9zZXQgdXAgYWxsIHRoZSBjbGFzc2VzXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoSW1hZ2VQb3B1cFNlbGVjdG9yKTtcclxuY29uc3QgdXNlclByb2ZpbGUgPSBuZXcgVXNlckluZm8oXHJcbiAgXCIucHJvZmlsZV9faGVhZGVyXCIsXHJcbiAgXCIucHJvZmlsZV9fc3ViaGVhZGVyXCIsXHJcbiAgXCIucHJvZmlsZV9fcGljdHVyZV9pbWFnZVwiXHJcbik7XHJcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBhZGRDYXJkRm9ybUVsZW1lbnQpO1xyXG5jb25zdCBhZGRDYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKGFkZENhcmRPYmplY3QpO1xyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcclxuICBjb25maWcsXHJcbiAgZWRpdFByb2ZpbGVGb3JtRWxlbWVudFxyXG4pO1xyXG5jb25zdCBlZGl0UHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybShlZGl0UHJvZmlsZU9iamVjdCk7XHJcbmxldCBjYXJkU2VsZWN0aW9uO1xyXG5jb25zdCBkZWxldGVDYXJkRm9ybSA9IG5ldyBEZWxldGVDb25maXJtYXRpb25Qb3B1cChkZWxldGVDYXJkT2JqZWN0KTtcclxuY29uc3QgZWRpdFByb2ZpbGVBdmF0YXJGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oZWRpdEF2YXRhck9iamVjdCk7XHJcbmNvbnN0IGVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXHJcbiAgY29uZmlnLFxyXG4gIGVkaXRBdmF0YXJGb3JtRWxlbWVudFxyXG4pO1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vQWRkaW5nIGZ1bmN0aW9uYWxpdHkgdG8gaW5kZXguanNcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuZWRpdFByb2ZpbGVBdmF0YXJGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmRlbGV0ZUNhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmFkZENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRQcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5pbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkQ2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG4vLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXHJcbi8vZXZlbnQgbGlzdGVuZXJzXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuYWRkQ2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZENhcmRGb3JtLm9wZW4oKTtcclxufSk7XHJcblxyXG5lZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VyUHJvZmlsZS5nZXRVc2VySW5mbygpO1xyXG4gIGNvbnNvbGUubG9nKHVzZXJQcm9maWxlLmdldFVzZXJJbmZvKCkpO1xyXG4gIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XHJcbiAgam9iSW5wdXQudmFsdWUgPSBqb2I7XHJcbiAgZWRpdFByb2ZpbGVGb3JtLm9wZW4oKTtcclxufSk7XHJcbmltYWdlUHJvZmlsZUF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKFwiSW1hZ2UgcHJvZmlsZSBhdmF0YXIgaXMgYmVpbmcgY2xpY2tlZFwiKTtcclxuICBlZGl0UHJvZmlsZUF2YXRhckZvcm0ub3BlbigpO1xyXG59KTtcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG4vLyB0ZXN0aW5nIHRoZSBBUElcclxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCI4ODNhNWYyNy05Y2E0LTQzOTctYWY1NS1lZjU2YzhhZDMwNDdcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG5hcGlcclxuICAubG9hZFVzZXJJbmZvKClcclxuICAudGhlbigoeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0pID0+IHtcclxuICAgIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvKG5hbWUsIGFib3V0KTtcclxuICAgIHVzZXJQcm9maWxlLnNldFVzZXJBdmF0YXIoYXZhdGFyKTtcclxuICB9KVxyXG4gIC5jYXRjaCgocmVzKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhgVGhlcmUgaXMgYW4gZXJyb3IgaW4gdGhlIHByb2dyYW06ICR7cmVzfWApO1xyXG4gIH0pO1xyXG5hcGlcclxuICAuZ2V0SW5pdGlhbENhcmRzKClcclxuICAudGhlbigoY2FyZHMpID0+IHtcclxuICAgIGNhcmRTZWxlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICAgICAge1xyXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGl0ZW0pO1xyXG4gICAgICAgICAgY2FyZFNlbGVjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcclxuICAgICAgfSxcclxuICAgICAgc2VsZWN0b3JzLkNhcmRTZWxlY3Rpb25cclxuICAgICk7XHJcbiAgICBjYXJkU2VsZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKHJlcykgPT4ge1xyXG4gICAgY29uc29sZS5sb2coYFRoZXJlIGlzIGFuIGVycm9yIGluIHRoZSBwcm9ncmFtOiAke3Jlc31gKTtcclxuICB9KTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChyZXF1ZXN0LCBwb3B1cEluc3RhbmNlLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcclxuICAvLyBoZXJlIHdlIGNoYW5nZSB0aGUgYnV0dG9uIHRleHRcclxuICBwb3B1cEluc3RhbmNlLnJlbmRlckxvYWRpbmcodHJ1ZSwgbG9hZGluZ1RleHQpO1xyXG4gIHJlcXVlc3QoKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAvLyBXZSBuZWVkIHRvIGNsb3NlIG9ubHkgaW4gYHRoZW5gXHJcbiAgICAgIHBvcHVwSW5zdGFuY2UuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAvLyB3ZSBuZWVkIHRvIGNhdGNoIHBvc3NpYmxlIGVycm9yc1xyXG4gICAgLy8gY29uc29sZS5lcnJvciBpcyB1c2VkIHRvIGhhbmRsZSBlcnJvcnMgaWYgeW91IGRvbuKAmXQgaGF2ZSBhbnkgb3RoZXIgd2F5cyBmb3IgdGhhdFxyXG4gICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpXHJcbiAgICAvLyBpbiBgZmluYWxseWAgd2UgbmVlZCB0byByZXR1cm4gdGhlIGluaXRpYWwgYnV0dG9uIHRleHQgYmFjayBpbiBhbnkgY2FzZVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cEluc3RhbmNlLnJlbmRlckxvYWRpbmcoZmFsc2UpO1xyXG4gICAgfSk7XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuXHJcbiAgICB0aGlzLnBvcHVwSW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuaW1hZ2UtbW9kYWxfX2ltYWdlLWVsZW1lbnRcIlxyXG4gICAgKTtcclxuICAgIHRoaXMucG9wdXBJbWFnZVRleHRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5pbWFnZS1tb2RhbF9fdGV4dFwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4oeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIC8vVE9ETzogb3BlbiB0aGUgaW1hZ2UgbW9kYWwgYW5kIHBhc3MgaW4gdGhlIGN1cnJlbnQgaW1hZ2UgZGF0YSB0byB0aGUgaW1hZ2UgbW9kYWxcclxuICAgIHRoaXMucG9wdXBJbWFnZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwic3JjXCIsIGxpbmspO1xyXG4gICAgdGhpcy5wb3B1cEltYWdlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgbmFtZSk7XHJcbiAgICB0aGlzLnBvcHVwSW1hZ2VUZXh0RWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcblxyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IobmFtZUVsZW1lbnQsIGpvYkVsZW1lbnQsIHBpY3R1cmVFbGVtZW50KSB7XHJcbiAgICB0aGlzLnByb2ZpbGVKb2JFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iRWxlbWVudCk7XHJcbiAgICB0aGlzLnByb2ZpbGVOYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVFbGVtZW50KTtcclxuICAgIHRoaXMucHJvZmlsZUF2YXRhckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihwaWN0dXJlRWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIC8vcmV0dXJucyBhbiBvYmplY3Q7XHJcbiAgICBjb25zdCBuZXdPYmogPSB7XHJcbiAgICAgIG5hbWU6IFwiXCIsXHJcbiAgICAgIGpvYjogXCJcIixcclxuICAgIH07XHJcbiAgICBuZXdPYmoubmFtZSA9IHRoaXMucHJvZmlsZU5hbWVFbC50ZXh0Q29udGVudDtcclxuICAgIG5ld09iai5qb2IgPSB0aGlzLnByb2ZpbGVKb2JFbC50ZXh0Q29udGVudDtcclxuICAgIHJldHVybiBuZXdPYmo7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyhuYW1lLCBqb2IpIHtcclxuICAgIHRoaXMucHJvZmlsZUpvYkVsLnRleHRDb250ZW50ID0gam9iO1xyXG4gICAgdGhpcy5wcm9maWxlTmFtZUVsLnRleHRDb250ZW50ID0gbmFtZTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJBdmF0YXIodXJsKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcInNldFVzZXJBdmF0YXIoKSBoYXMgYmVlbiBjYWxsZWRcIik7XHJcbiAgICBjb25zb2xlLmxvZyh1cmwpO1xyXG4gICAgdGhpcy5wcm9maWxlQXZhdGFyRWwuc2V0QXR0cmlidXRlKFwic3JjXCIsIHVybCk7XHJcbiAgICB0aGlzLnByb2ZpbGVBdmF0YXJFbC5zZXRBdHRyaWJ1dGUoXCJhbHRcIiwgdGhpcy5wcm9maWxlTmFtZUVsLnRleHRDb250ZW50KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRGVsZXRlQ29uZmlybWF0aW9uUG9wdXAgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcclxuICAgIHRoaXMucG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICBjb25zb2xlLmxvZyh0aGlzLl9wb3B1cEZvcm0pO1xyXG4gICAgdGhpcy5fbW9kYWxEZWxldGVCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIubW9kYWxfX3NhdmUtYnV0dG9uXCJcclxuICAgICk7XHJcbiAgICB0aGlzLl9tb2RhbERlbGV0ZUJ1dHRvbkRlZmF1bHRUZXh0ID0gdGhpcy5fbW9kYWxEZWxldGVCdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgfVxyXG5cclxuICBzZXRTdWJtaXRBY3Rpb24oYWN0aW9uKSB7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiRGVsZXRpbmcuLi5cIikge1xyXG4gICAgY29uc29sZS5sb2coXCJyZW5kZXIgbG9hZGluZyBtZXRob2QgaXMgYmVpbmcgY2FsbGVkXCIpO1xyXG4gICAgaWYgKGlzTG9hZGluZyA9PSB0cnVlKSB7XHJcbiAgICAgIHRoaXMuX21vZGFsRGVsZXRlQnV0dG9uLnRleHRDb250ZW50ID0gbG9hZGluZ1RleHQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9tb2RhbERlbGV0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IHRoaXMuX21vZGFsRGVsZXRlQnV0dG9uRGVmYXVsdFRleHQ7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICAvLyBjb25zdHJ1Y3RvciBib2R5XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrVmFsaWRSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICAvLyBvdGhlciBtZXRob2RzIGZvciB3b3JraW5nIHdpdGggdGhlIEFQSVxyXG4gIGxvYWRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1ZhbGlkUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgbG9hZENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrVmFsaWRSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBlZGl0UHJvZmlsZShuYW1lLCBhYm91dCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IGFib3V0LFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tWYWxpZFJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZENhcmQobmFtZSwgbGluaykge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBsaW5rOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tWYWxpZFJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrVmFsaWRSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBhZGRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1ZhbGlkUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tWYWxpZFJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHVwZGF0ZVByb2ZpbGVQaWN0dXJlKGltYWdlVXJsKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcjogaW1hZ2VVcmwsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1ZhbGlkUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgX2ZldGNoUmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcclxuICAgIHJldHVybiBmZXRjaCh1cmwsIG9wdGlvbnMpLnRoZW4odGhpcy5fY2hlY2tWYWxpZFJlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIF9jaGVja1ZhbGlkUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvciAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2hpZGVJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJfc2hvd0lucHV0RXJyb3IiLCJhZGQiLCJlcnJvck1lc3NhZ2UiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJpbnB1dEVsIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl90dXJuQnV0dG9uQWN0aXZlIiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX3R1cm5CdXR0b25JbkFjdGl2ZSIsIl9oYXNJbnZhbGlkT3V0cHV0IiwiX2lucHV0RWxzIiwiZXZlcnkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9zZXRFdmVudExpc3RlbmVycyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2dCIsImVuYWJsZVZhbGlkYXRpb24iLCJjb25zb2xlIiwibG9nIiwicHJldmVudERlZmF1bHQiLCJTZWN0aW9uIiwiX3JlZiIsImNsYXNzU2VsZWN0b3IiLCJyZW5kZXJlciIsIml0ZW1zIiwiX3JlbmRlcmVyIiwiX2l0ZW1zIiwiX2VsZW1lbnQiLCJyZW5kZXJJdGVtcyIsIml0ZW0iLCJhZGRJdGVtIiwiZGF0YSIsInByZXBlbmQiLCJhZGRDYXJkTW9kYWwiLCJlZGl0UHJvZmlsZW1vZGFsIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJhZGRDYXJkQnV0dG9uIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRDYXJkRm9ybUVsZW1lbnQiLCJlZGl0UHJvZmlsZUZvcm1FbGVtZW50IiwiZWRpdEF2YXRhckZvcm1FbGVtZW50IiwiaW1hZ2VQcm9maWxlQXZhdGFyIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJvcGVuRGVsZXRlRm9ybSIsImFkZExpa2VCdXR0b24iLCJyZW1vdmVMaWtlQnV0dG9uIiwiaXNMaWtlZCIsIm5hbWUiLCJsaW5rIiwiX2lkIiwiX2hhbmRsZUltYWdlQ2xpY2siLCJfYWRkTGlrZUJ1dHRvbiIsIl9yZW1vdmVMaWtlQnV0dG9uIiwibGlrZUJ1dHRvbiIsIl9jYXJkRWxlbWVudCIsImNhcmRJbWFnZUVsZW1lbnQiLCJfbGlrZVN0YXR1cyIsImFkZExpa2VCdXR0b25FbGVtZW50IiwicmVtb3ZlTGlrZUJ1dHRvbkVsZW1lbnQiLCJfdG9nZ2xlTGlrZUJ1dHRvbiIsInRvZ2dsZSIsImRlbGV0ZUNhcmQiLCJnZXRWaWV3IiwiY2FyZFRlbXBsYXRlIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiY2FyZFRpdGxlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfbW9kYWxDbG9zZUJ1dHRvbiIsIm9wZW4iLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsInBvcHVwRm9ybSIsIl9oYW5kRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfbW9kYWxTYXZlQnV0dG9uRGVmYXVsdFRleHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0T2JqIiwiaW5wdXQiLCJ2YWx1ZSIsInJlbmRlckxvYWRpbmciLCJpc0xvYWRpbmciLCJsb2FkaW5nVGV4dCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsImltYWdlUG9wdXAiLCJjcmVhdGVDYXJkIiwiY2FyZERhdGEiLCJjYXJkIiwiZGVsZXRlQ2FyZEZvcm0iLCJzZXRTdWJtaXRBY3Rpb24iLCJhcGkiLCJ0aGVuIiwicmVzIiwiZmluYWxseSIsImNhdGNoIiwiYWRkTGlrZSIsInJlbW92ZUxpa2UiLCJhZGRDYXJkT2JqZWN0IiwiYWRkQ2FyZEZvcm0iLCJhZGRDYXJkIiwiY2FyZEVsZW1lbnQiLCJjYXJkU2VsZWN0aW9uIiwicmVzZXQiLCJhZGRDYXJkRm9ybVZhbGlkYXRvciIsImVkaXRQcm9maWxlT2JqZWN0IiwiZWRpdFByb2ZpbGVGb3JtIiwiZWRpdFByb2ZpbGUiLCJwcm9maWxlTmFtZSIsInByb2ZpbGVKb2IiLCJ1c2VyUHJvZmlsZSIsInNldFVzZXJJbmZvIiwiZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiZWRpdEF2YXRhck9iamVjdCIsImVkaXRQcm9maWxlQXZhdGFyRm9ybSIsInVwZGF0ZVByb2ZpbGVQaWN0dXJlIiwiYXZhdGFyIiwic2V0VXNlckF2YXRhciIsImVkaXRBdmF0YXJGb3JtVmFsaWRhdG9yIiwicG9wdXBJbWFnZUVsZW1lbnQiLCJwb3B1cEltYWdlVGV4dEVsZW1lbnQiLCJfcmVmMiIsIm5hbWVFbGVtZW50Iiwiam9iRWxlbWVudCIsInBpY3R1cmVFbGVtZW50IiwicHJvZmlsZUpvYkVsIiwicHJvZmlsZU5hbWVFbCIsInByb2ZpbGVBdmF0YXJFbCIsImdldFVzZXJJbmZvIiwibmV3T2JqIiwiam9iIiwidXJsIiwiX21vZGFsRGVsZXRlQnV0dG9uIiwiX21vZGFsRGVsZXRlQnV0dG9uRGVmYXVsdFRleHQiLCJhY3Rpb24iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImdldEluaXRpYWxDYXJkcyIsImZldGNoIiwibWV0aG9kIiwiX2NoZWNrVmFsaWRSZXNwb25zZSIsImxvYWRVc2VySW5mbyIsImxvYWRDYXJkcyIsImFib3V0IiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkSWQiLCJpbWFnZVVybCIsIl9mZXRjaFJlcXVlc3QiLCJvcHRpb25zIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImF1dGhvcml6YXRpb24iLCJjYXJkcyJdLCJzb3VyY2VSb290IjoiIn0=